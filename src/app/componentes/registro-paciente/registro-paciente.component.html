<div class="container mt-5">
  <h3 class="text-center text-primary mb-4">Registro de Paciente</h3>

  <form [formGroup]="pacienteForm" (ngSubmit)="register()">
    <div class="mb-3">
      <label class="form-label">Correo electrónico</label>
      <input type="email" class="form-control" formControlName="email">
      <div *ngIf="pacienteForm.get('email')?.invalid && pacienteForm.get('email')?.touched" class="text-danger">
        Ingresá un email válido.
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Nombre</label>
      <input type="text" class="form-control" formControlName="nombre">
    </div>

    <div class="mb-3">
      <label class="form-label">Apellido</label>
      <input type="text" class="form-control" formControlName="apellido">
    </div>

    <div class="mb-3">
      <label class="form-label">Contraseña</label>
      <input type="password" class="form-control" formControlName="password">
    </div>

    <div class="mb-3">
      <label class="form-label">Edad</label>
      <input type="number" class="form-control" formControlName="edad" min="0">
      <div *ngIf="pacienteForm.get('edad')?.invalid && pacienteForm.get('edad')?.touched" class="text-danger">
        Ingresá una edad válida.
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">DNI</label>
      <input type="text" class="form-control" formControlName="dni">
      <div *ngIf="pacienteForm.get('dni')?.invalid && pacienteForm.get('dni')?.touched" class="text-danger">
        Ingresá un DNI válido (solo números).
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Obra Social</label>
      <input type="text" class="form-control" formControlName="obraSocial">
      <div *ngIf="pacienteForm.get('obraSocial')?.invalid && pacienteForm.get('obraSocial')?.touched" class="text-danger">
        Ingresá una obra social válida.
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Foto de perfil</label>
      <input type="file" class="form-control" (change)="onFileChange($event, 'foto')">
      <div *ngIf="fotoInvalida" class="text-danger">
        Seleccioná una imagen.
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Foto adicional</label>
      <input type="file" class="form-control" (change)="onFileChange($event, 'fotoExtra')">
      <div *ngIf="fotoExtraInvalida" class="text-danger">
        Seleccioná una imagen adicional.
      </div>
    </div>

    <div id="captcha-element" class="mb-3"></div>

    <button type="submit" class="btn btn-success w-100" [disabled]="pacienteForm.invalid">
      Registrarme
    </button>
  </form>
</div>

<app-loading *ngIf="loadingService.loading$ | async"></app-loading>
